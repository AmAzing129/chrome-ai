<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>chrome-ai</title>
  </head>
  <body>
    <main>
      <input type="text" id="input" />
      <button onclick="run()">run</button>
      <div id="result"></div>
    </main>

    <script type="module">
      import { streamText, generateObject } from 'https://esm.sh/ai';
      // import { chromeai } from '../dist/index.js';
      import { chromeai } from 'https://esm.sh/chrome-ai';

      window.run = async () => {
        const input = document.getElementById('input');
        const result = document.getElementById('result');
        result.textContent = 'loading...';

        const { textStream } = await streamText({
          model: chromeai('text'),
          prompt: input.value,
        });

        for await (const textPart of textStream) {
          result.textContent = textPart;
        }
      };
    </script>
  </body>
</html>
